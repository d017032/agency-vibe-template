---
import { Image } from 'astro:assets';

interface Props {
  src: string;
  alt: string;
  className?: string;
}

const { src, alt, className } = Astro.props;

// Scans your client folder for images
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/client/*.{jpeg,jpg,png,gif,webp}');

const path = `/src/assets/client/${src}`;
const imageExists = images[path];
---

{imageExists ? (
  <Image 
    src={images[path]()} 
    alt={alt} 
    class={className}
    format="webp"
    quality="high"
  />
) : (
  <div class={`bg-slate-800/50 flex flex-col items-center justify-center border-2 border-dashed border-slate-700 ${className}`}>
    <span class="text-slate-500 text-xs italic">Missing: {src}</span>
  </div>
)}