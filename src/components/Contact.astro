---
const { id, brand, contact, settings } = Astro.props;

// Pull the headline from JSON or use a neutral fallback
const contactHeadline = brand.contact_headline || "Ready to get started?";
---

<section id={id} class="py-24 px-6 bg-[var(--text-primary)] text-[var(--bg-color)] scroll-mt-24">
  <div class="container mx-auto max-w-6xl">
    <div class="grid md:grid-cols-2 gap-16 items-center"> 
      
      <div class="space-y-8">
        <div>
          <span class="text-[10px] font-bold uppercase tracking-[0.4em] text-[var(--accent)] mb-4 block">
            // ESTABLISH_CONTACT
          </span>
          <h2 class="text-4xl md:text-6xl font-black uppercase tracking-tighter leading-none mb-6">
            {contactHeadline}
          </h2>
          <p class="text-[var(--bg-color)] opacity-70 max-w-md leading-relaxed">
            {brand.objection_handle}
          </p>
        </div>

        <div class="space-y-6 font-mono text-xs tracking-[0.2em]">
          <div class="flex items-center gap-4 group">
            <span class="w-8 h-px bg-[var(--accent)] transition-all group-hover:w-12"></span>
            <span class="text-[var(--accent)]">PH //</span> 
            <a href={`tel:${contact.phone}`} class="hover:text-[var(--accent)] transition-colors">
              {contact.phone}
            </a>
          </div>

          <div class="flex items-center gap-4">
            <span class="w-8 h-px bg-[var(--accent)]"></span>
            <span class="text-[var(--accent)]">LOC //</span> {contact.location}
          </div>

          <div class="flex items-center gap-4 group">
            <span class="w-8 h-px bg-[var(--accent)] transition-all group-hover:w-12"></span>
            <span class="text-[var(--accent)]">EM //</span> 
            <a href={`mailto:${contact.email}`} class="hover:text-[var(--accent)] transition-colors lowercase tracking-normal">
              {contact.email}
            </a>
          </div>
        </div>
      </div>

      <div class="bg-[var(--bg-color)] p-8 md:p-12 rounded-[var(--radius)] shadow-2xl relative overflow-hidden">
        <div class="absolute top-0 right-0 p-4 opacity-5 font-mono text-[60px] font-black select-none pointer-events-none text-[var(--text-primary)]">
          MSG
        </div>

        <form 
          name="contact" 
          method="POST" 
          action="/success"
          data-netlify="true" 
          class="flex flex-col gap-6 relative z-10"
        >
          <input type="hidden" name="form-name" value="contact" />
        
          <div class="flex flex-col gap-2">
            <label class="text-[11px] font-mono uppercase tracking-[0.2em] text-[var(--text-secondary)] opacity-80">
              Full Name
            </label>
            <input 
              type="text" 
              name="name" 
              placeholder="REQUIRED" 
              class="w-full bg-transparent border-b border-[var(--border)] py-3 text-[var(--text-primary)] outline-none focus:border-[var(--accent)] focus:placeholder:opacity-0 transition-all placeholder:opacity-20 text-sm" 
              required 
            />
          </div>
        
          <div class="flex flex-col gap-2">
            <label class="text-[11px] font-mono uppercase tracking-[0.2em] text-[var(--text-secondary)] opacity-80">
              Email Address
            </label>
            <input 
              type="email" 
              name="email" 
              placeholder="EMAIL@DOMAIN.COM" 
              class="w-full bg-transparent border-b border-[var(--border)] py-3 text-[var(--text-primary)] outline-none focus:border-[var(--accent)] focus:placeholder:opacity-0 transition-all placeholder:opacity-20 text-sm" 
              required 
            />
          </div>
        
          <div class="flex flex-col gap-2">
            <label class="text-[11px] font-mono uppercase tracking-[0.2em] text-[var(--text-secondary)] opacity-80">
              Project Details
            </label>
            <textarea 
              name="message" 
              rows="4" 
              placeholder="HOW CAN WE HELP?" 
              class="w-full bg-transparent border-b border-[var(--border)] py-3 text-[var(--text-primary)] outline-none focus:border-[var(--accent)] focus:placeholder:opacity-0 transition-all placeholder:opacity-20 resize-none text-sm"
            ></textarea>
          </div>
        
          <button 
            type="submit" 
            class="w-full bg-[var(--accent)] text-[var(--bg-color)] py-5 font-bold uppercase tracking-[0.3em] text-[10px] hover:brightness-110 active:scale-[0.98] transition-all mt-4 rounded-[var(--radius)]"
          >
            {settings.cta_text}
          </button>
        </form>
      </div>

    </div>
  </div>
</section>